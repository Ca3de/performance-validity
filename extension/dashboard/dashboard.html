<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AA Performance Validity Dashboard</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="app-header">
      <div class="header-left">
        <h1 class="app-title">
          <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
          </svg>
          AA Performance Validity
        </h1>
        <span class="warehouse-badge" id="warehouseBadge">Loading...</span>
      </div>
      <div class="header-right">
        <div class="date-range-picker">
          <label>Date Range:</label>
          <input type="date" id="startDate" />
          <span>to</span>
          <input type="date" id="endDate" />
          <button class="btn btn-primary" id="applyDateRange">Apply</button>
        </div>
        <button class="btn btn-secondary" id="refreshBtn">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
          </svg>
          Refresh
        </button>
      </div>
    </header>

    <!-- Search and Filter Bar -->
    <div class="filter-bar">
      <div class="search-box">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        <input type="text" id="employeeSearch" placeholder="Search by Employee ID or Name..." />
      </div>
      <div class="filter-pills" id="pathFilters">
        <!-- Path filter pills will be generated by JS -->
      </div>
    </div>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Summary Cards -->
      <div class="summary-cards" id="summaryCards">
        <div class="summary-card">
          <div class="card-icon" style="background: #E3F2FD; color: #1976D2;">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
          </div>
          <div class="card-content">
            <div class="card-value" id="totalEmployees">0</div>
            <div class="card-label">Total AAs</div>
          </div>
        </div>
        <div class="summary-card">
          <div class="card-icon" style="background: #E8F5E9; color: #2E7D32;">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
          </div>
          <div class="card-content">
            <div class="card-value" id="meetingGoal">0</div>
            <div class="card-label">Meeting Goal</div>
          </div>
        </div>
        <div class="summary-card">
          <div class="card-icon" style="background: #FFF3E0; color: #E65100;">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
              <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
            </svg>
          </div>
          <div class="card-content">
            <div class="card-value" id="belowGoal">0</div>
            <div class="card-label">Below Goal</div>
          </div>
        </div>
        <div class="summary-card">
          <div class="card-icon" style="background: #F3E5F5; color: #7B1FA2;">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
              <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
            </svg>
          </div>
          <div class="card-content">
            <div class="card-value" id="totalPaths">0</div>
            <div class="card-label">Active Paths</div>
          </div>
        </div>
      </div>

      <!-- Employee Input Section -->
      <div class="employee-input-section">
        <h3>Add Employees to Check</h3>
        <div class="input-row">
          <textarea id="employeeInput" placeholder="Enter employee IDs or logins (one per line or comma-separated)..."></textarea>
          <button class="btn btn-primary" id="addEmployeesBtn">Add Employees</button>
        </div>
      </div>

      <!-- Performance Table -->
      <div class="table-container">
        <div class="table-header">
          <h2>Performance by Path</h2>
          <div class="table-actions">
            <button class="btn btn-outline" id="exportCsvBtn">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
              </svg>
              Export CSV
            </button>
            <select id="sortSelect">
              <option value="employee">Sort by Employee</option>
              <option value="path">Sort by Path</option>
              <option value="rate">Sort by JPH</option>
              <option value="hours">Sort by Hours</option>
            </select>
          </div>
        </div>
        <div class="table-wrapper">
          <table id="performanceTable">
            <thead>
              <tr>
                <th>Employee</th>
                <th>Path</th>
                <th>Hours</th>
                <th>Jobs</th>
                <th>JPH</th>
                <th>Goal</th>
                <th>% to Goal</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="performanceBody">
              <tr class="empty-state">
                <td colspan="9">
                  <div class="empty-message">
                    <svg viewBox="0 0 24 24" width="48" height="48" fill="currentColor" opacity="0.3">
                      <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                    </svg>
                    <p>No performance data loaded</p>
                    <p class="hint">Add employees above or click "AA Performance" on FCLM to load data</p>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Path Breakdown Section -->
      <div class="path-breakdown" id="pathBreakdown">
        <h2>Path Summary</h2>
        <div class="path-cards" id="pathCards">
          <!-- Path cards will be generated by JS -->
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
      <span>AA Performance Validity v1.0.0</span>
      <span>|</span>
      <a href="https://github.com/Ca3de/performance-validity" target="_blank">GitHub</a>
    </footer>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
    <p>Loading performance data...</p>
  </div>

  <!-- Toast Notifications -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="dashboard.js"></script>
</body>
</html>
